name: Random Daily Motivation

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  daily-quote-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Generate Random Quotes
        run: |
          # 1. Create a local list of quotes to avoid API errors
          QUOTES=(
            "Believe you can and you're halfway there.|Theodore Roosevelt"
            "Action is the foundational key to all success.|Pablo Picasso"
            "Your limitation—it's only your imagination.|Anonymous"
            "Push yourself, because no one else is going to do it for you.|Anonymous"
            "Great things never come from comfort zones.|Anonymous"
            "Dream it. Wish it. Do it.|Anonymous"
            "Success doesn’t just find you. You have to go out and get it.|Anonymous"
          )

          # 2. Randomly pick how many commits to do (1 to 3)
          COMMIT_COUNT=$((1 + RANDOM % 3))
          echo "Today we will do $COMMIT_COUNT commits."

          for i in $(seq 1 $COMMIT_COUNT)
          do
            # 3. Pick a random quote from our list
            SELECTED=${QUOTES[$RANDOM % ${#QUOTES[@]}]}
            QUOTE=$(echo $SELECTED | cut -d'|' -f1)
            AUTHOR=$(echo $SELECTED | cut -d'|' -f2)
            DATE=$(date +'%Y-%m-%d %H:%M')

            # 4. Append to table (Ensure quotes.md exists in your repo!)
            echo "| $DATE | $QUOTE | $AUTHOR |" >> quotes.md

            # 5. Git Commit
            git config --local user.email "github-actions[bot]@users.noreply.github.com"
            git config --local user.name "github-actions[bot]"
            git add quotes.md
            git commit -m "Automated Quote: $DATE"
            sleep 2
          done
          
          git push
